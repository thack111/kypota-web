<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}">
	<head></head>
	<body>
		<div layout:fragment="content">
			<h2 >KY POTA Contest Results</h2>
	
			<div th:if="${message}">
				<h2 th:text="${message}"/>
			</div>
	
			<div class="card bg-light text-dark">
				<div class="card-body">
					Here are the 2020 results.  These are built based on the logs submitted.  Please check the contest rules for more information on how the scores are counted.<br><br>
					
					<div class="form-group">
					  	<div class="container">
							<div class="row">
							    <div class="col">
							    	<label class="control-label" for="kypotayear">KY POTA Results year:</label>
								  	<div class="col-sm-10">
									  	<form class="form-inline mt-2 mt-md-0" method='POST'>
										<input type='hidden' name='post_action' value='setYear'>
											<select class="form-control" id="kypotayear" name="kypotayear" style="width:auto;">
					    						<option th:each="year : ${years}" th:value="${year.year}" th:text="${year.year}" th:selected="${year.year == resultsYear}"></option>
										  	</select>&nbsp;&nbsp;&nbsp;
										  	<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Select Year</button> 
				 						</form>
									</div>
							    </div>
							    <div class="col">
									<div class="col-sm-10" sec:authorize="hasRole('ROLE_ADMIN')">
										<form class="form-inline mt-2 mt-md-0" method='POST'>
											<input type='hidden' name='post_action' value='analyse'>
					 					    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Re-Calculate</button> 
					 					</form>
										</br>
									</div>
							    </div>
							</div>
					  	</div>
					</div> 
				</div>
			</div>
			<table class="table table-striped table-bordered">
			    <thead>
			     	<tr>
				        <th>Email</th>
				        <th>Name</th>
				        <th>Park</th>
				        <th>QSO Points</th>
				        <th># Bonus Stations</th>
				        <th># Unique Parks</th>
				        <th>Total Score</th>
				        <th># Park 2 Park</th>
			      	</tr>
			    </thead>
			    <tbody>
			      	<tr th:each="result : ${results}">
				        <td ><a th:href="@{/show_log(logId=${result.logId})}" th:text="${result.submittedEmail}"></a></td>
				        <td th:text="${result.submittedName}"></td>
				        <td th:text="${result.parkWorked}"></td>
				        <td th:text="${result.numQsoPoints}"></td>
				        <td th:text="${result.numBonus}"></td>
				        <td th:text="${result.numParks}"></td>
				        <td th:text="${result.totalScore}"></td>
				        <td th:text="${result.numPark2Park}"></td>
			      	</tr>
	        	</tbody>
	        </table>

        </div>
	</body>
</html>